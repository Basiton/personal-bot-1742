# –ë—ã—Å—Ç—Ä–∞—è —à–ø–∞—Ä–≥–∞–ª–∫–∞: –ü—Ä–æ–≤–µ—Ä–∫–∞ YandexGPT

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (–∫–æ–ø–∏—Ä—É–π –∏ –≤—ã–ø–æ–ª–Ω—è–π)

### 1. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞
```bash
sudo systemctl restart comapc-bot
```

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é YandexGPT
```bash
sudo journalctl -u comapc-bot -n 100 --no-pager | grep -A 15 "–ü–†–û–í–ï–†–ö–ê YANDEX GPT"
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úÖ YC_API_KEY –Ω–∞–π–¥–µ–Ω: AQVN1234***5678
   –ò—Å—Ç–æ—á–Ω–∏–∫: –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è YC_API_KEY
‚úÖ YC_FOLDER_ID –Ω–∞–π–¥–µ–Ω: b1g4or5i5s66hklqfg06
   –ò—Å—Ç–æ—á–Ω–∏–∫: –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è YC_FOLDER_ID
‚úÖ YANDEX GPT: –í–ö–õ–Æ–ß–Å–ù
```

### 3. –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ (–≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏)
```bash
sudo journalctl -u comapc-bot -f | grep --color=always -E "YANDEX GPT|ü§ñ|üì°|üì•|üéâ|‚ùå|‚ö†Ô∏è"
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥ –ø—Ä–∏ —É—Å–ø–µ—Ö–µ:**
```
ü§ñ YANDEX GPT: –Ω–∞—á–∏–Ω–∞–µ–º –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
üì° –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –∫ YandexGPT API...
üì• –ü–æ–ª—É—á–µ–Ω –æ—Ç–≤–µ—Ç –æ—Ç YandexGPT: HTTP 200
üéâ YandexGPT: –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —É—Å–ø–µ—à–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω
```

### 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—à–∏–±–∫–∏
```bash
sudo journalctl -u comapc-bot --since "10 minutes ago" | grep -B 2 -A 5 "‚ùå.*YandexGPT"
```

### 5. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (—Å–∫–æ–ª—å–∫–æ —É—Å–ø–µ—à–Ω—ã—Ö vs fallback)
```bash
echo "=== –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —á–∞—Å ==="
echo -n "–£—Å–ø–µ—à–Ω—ã—Ö YandexGPT: "
sudo journalctl -u comapc-bot --since "1 hour ago" | grep -c "—É—Å–ø–µ—à–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω"
echo -n "Fallback —à–∞–±–ª–æ–Ω–æ–≤: "
sudo journalctl -u comapc-bot --since "1 hour ago" | grep -c "–ò—Å–ø–æ–ª—å–∑—É—é fallback"
```

## üîç –ß—Ç–æ –æ–∑–Ω–∞—á–∞—é—Ç —Å–æ–æ–±—â–µ–Ω–∏—è

| –°–æ–æ–±—â–µ–Ω–∏–µ | –ó–Ω–∞—á–µ–Ω–∏–µ | –î–µ–π—Å—Ç–≤–∏–µ |
|-----------|----------|----------|
| `‚úÖ YANDEX GPT: –í–ö–õ–Æ–ß–Å–ù` | YandexGPT —Ä–∞–±–æ—Ç–∞–µ—Ç | ‚úÖ –í—Å—ë –û–ö |
| `‚ùå YANDEX GPT: –û–¢–ö–õ–Æ–ß–Å–ù` | –ù–µ—Ç API –∫–ª—é—á–∞ | ‚ö†Ô∏è –ü—Ä–æ–≤–µ—Ä—å unit |
| `üéâ —É—Å–ø–µ—à–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω` | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –æ—Ç GPT | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç! |
| `‚ö†Ô∏è –ò—Å–ø–æ–ª—å–∑—É—é fallback` | –û—à–∏–±–∫–∞, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —à–∞–±–ª–æ–Ω | ‚ö†Ô∏è –°–º–æ—Ç—Ä–∏ –æ—à–∏–±–∫—É |
| `‚ùå API error: HTTP 401` | –ù–µ–≤–µ—Ä–Ω—ã–π –∫–ª—é—á | üîß –ò—Å–ø—Ä–∞–≤—å –∫–ª—é—á |
| `‚ùå API error: HTTP 403` | –ù–µ—Ç –ø—Ä–∞–≤ | üîß –î–æ–±–∞–≤—å —Ä–æ–ª—å |
| `‚ùå API error: HTTP 400` | –ù–µ–≤–µ—Ä–Ω—ã–π folder_id | üîß –ò—Å–ø—Ä–∞–≤—å folder |

## üõ†Ô∏è –ë—ã—Å—Ç—Ä—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞: "‚ùå API KEY –ù–ï –ù–ê–ô–î–ï–ù"
```bash
# 1. –û—Ç–∫—Ä–æ–π unit
sudo nano /etc/systemd/system/comapc-bot.service

# 2. –î–æ–±–∞–≤—å –≤ [Service] –ü–†–ê–í–ò–õ–¨–ù–´–ô –°–ò–ù–¢–ê–ö–°–ò–°:
#    –ö–∞–≤—ã—á–∫–∏ –≤–æ–∫—Ä—É–≥ –í–°–ï–ô –ø–∞—Ä—ã "NAME=value", –ù–ï –≤–æ–∫—Ä—É–≥ value!
Environment="YC_API_KEY=—Ç–≤–æ–π_–∫–ª—é—á_—Å—é–¥–∞"
Environment="YC_FOLDER_ID=—Ç–≤–æ–π_folder_—Å—é–¥–∞"

# ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û: Environment=YC_API_KEY="–∑–Ω–∞—á–µ–Ω–∏–µ"
# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:   Environment="YC_API_KEY=–∑–Ω–∞—á–µ–Ω–∏–µ"

# 3. –°–æ—Ö—Ä–∞–Ω–∏ (Ctrl+O, Enter, Ctrl+X)

# 4. –ü—Ä–∏–º–µ–Ω–∏
sudo systemctl daemon-reload
sudo systemctl restart comapc-bot

# 5. –ü—Ä–æ–≤–µ—Ä—å (–Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∫–∞–≤—ã—á–µ–∫ –í–ù–£–¢–†–ò –∑–Ω–∞—á–µ–Ω–∏–π)
sudo systemctl show comapc-bot -p Environment
```

### –ü—Ä–æ–±–ª–µ–º–∞: "‚ùå API error: HTTP 401"
```bash
# –ù–µ–≤–µ—Ä–Ω—ã–π –∫–ª—é—á ‚Äî –ø—Ä–æ–≤–µ—Ä—å —á—Ç–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–ª –ø–æ–ª–Ω–æ—Å—Ç—å—é
# –ö–ª—é—á –¥–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å AQVN...
```

### –ü—Ä–æ–±–ª–µ–º–∞: "‚ùå API error: HTTP 403"
```bash
# –ù–µ—Ç –ø—Ä–∞–≤ –Ω–∞ folder
# 1. –ò–¥–∏ –≤ Yandex Cloud Console
# 2. –°–µ—Ä–≤–∏—Å–Ω—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã ‚Üí –≤—ã–±–µ—Ä–∏ —Å–≤–æ–π
# 3. –î–æ–±–∞–≤—å —Ä–æ–ª—å: ai.languageModels.user
```

### –ü—Ä–æ–±–ª–µ–º–∞: "‚ùå API error: HTTP 400"
```bash
# –ù–µ–≤–µ—Ä–Ω—ã–π folder_id
# 1. –ò–¥–∏ –≤ Yandex Cloud Console
# 2. –í—ã–±–µ—Ä–∏ –∫–∞—Ç–∞–ª–æ–≥
# 3. –°–∫–æ–ø–∏—Ä—É–π ID (–Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å b1g...)
# 4. –û–±–Ω–æ–≤–∏ –≤ unit —Ñ–∞–π–ª–µ
```

## üìã –ü–æ–ª–µ–∑–Ω—ã–µ –æ–¥–Ω–æ—Å—Ç—Ä–æ—á–Ω–∏–∫–∏

```bash
# –ü–æ—Å–ª–µ–¥–Ω–∏–µ 50 —Å—Ç—Ä–æ–∫ –ª–æ–≥–æ–≤
sudo journalctl -u comapc-bot -n 50

# –õ–æ–≥–∏ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 30 –º–∏–Ω—É—Ç
sudo journalctl -u comapc-bot --since "30 minutes ago"

# –¢–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏
sudo journalctl -u comapc-bot -p err

# –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞
sudo systemctl status comapc-bot

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
sudo systemctl show comapc-bot -p Environment

# –ü–æ–ª–Ω—ã–π –ª–æ–≥ –≤ —Ñ–∞–π–ª
sudo journalctl -u comapc-bot -n 1000 > /tmp/bot-log.txt
cat /tmp/bot-log.txt
```

## üéØ –ß—Ç–æ —Ç–æ—á–Ω–æ –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å

1. **–ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ:** –≤–∏–¥–∏—à—å –±–ª–æ–∫ "–ü–†–û–í–ï–†–ö–ê YANDEX GPT –û–ö–†–£–ñ–ï–ù–ò–Ø"
2. **–ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ:** –≤–∏–¥–∏—à—å "‚úÖ YANDEX GPT: –í–ö–õ–Æ–ß–Å–ù"
3. **–ü—Ä–∏ –∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏:** –≤–∏–¥–∏—à—å "ü§ñ YANDEX GPT: –Ω–∞—á–∏–Ω–∞–µ–º –≥–µ–Ω–µ—Ä–∞—Ü–∏—é"
4. **–ü–æ—Å–ª–µ –∑–∞–ø—Ä–æ—Å–∞:** –≤–∏–¥–∏—à—å "üì• –ü–æ–ª—É—á–µ–Ω –æ—Ç–≤–µ—Ç: HTTP 200"
5. **–í –∫–æ–Ω—Ü–µ:** –≤–∏–¥–∏—à—å "üéâ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —É—Å–ø–µ—à–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω"

–ï—Å–ª–∏ –≤—Å—ë —ç—Ç–æ –µ—Å—Ç—å ‚Äî **YandexGPT —Ä–∞–±–æ—Ç–∞–µ—Ç!** üéâ

–ï—Å–ª–∏ —á–µ–≥–æ-—Ç–æ –Ω–µ—Ç ‚Äî —Å–º–æ—Ç—Ä–∏ –æ—à–∏–±–∫–∏ –º–µ–∂–¥—É —ç—Ç–∏–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏.

## üìû –ß—Ç–æ —Å–æ–æ–±—â–∏—Ç—å –µ—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

–°–∫–æ–ø–∏—Ä—É–π –∏ –ø—Ä–∏—à–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —ç—Ç–∏—Ö –∫–æ–º–∞–Ω–¥:

```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
sudo systemctl show comapc-bot -p Environment

# 2. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
sudo journalctl -u comapc-bot -n 100 | grep -A 15 "–ü–†–û–í–ï–†–ö–ê YANDEX GPT"

# 3. –ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ—à–∏–±–∫–∏
sudo journalctl -u comapc-bot --since "10 minutes ago" | grep -B 2 -A 5 "‚ùå"

# 4. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
echo "–£—Å–ø–µ—à–Ω—ã—Ö: $(sudo journalctl -u comapc-bot --since "1 hour ago" | grep -c '—É—Å–ø–µ—à–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω')"
echo "Fallback: $(sudo journalctl -u comapc-bot --since "1 hour ago" | grep -c '–ò—Å–ø–æ–ª—å–∑—É—é fallback')"
```

