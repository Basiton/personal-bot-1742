#!/usr/bin/env python3
"""
Ğ”ĞµĞ¼Ğ¾Ğ½ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ normalize_account_id Ğ² ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚Ğµ showcase ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´
"""

def normalize_account_id(phone_or_id):
    """
    ĞŸÑ€ĞµĞ¾Ğ±Ñ€Ğ°Ğ·ÑƒĞµÑ‚ Ğ»ÑĞ±Ğ¾Ğ¹ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚ Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğ° Ğ² ĞºĞ¾Ñ€Ğ¾Ñ‚ĞºĞ¸Ğ¹ ID (ĞºĞ¾Ğ´ ÑÑ‚Ñ€Ğ°Ğ½Ñ‹)
    
    ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹:
    +15178979270 â†’ +1
    +79261234567 â†’ +7
    +442071234567 â†’ +44
    +380991234567 â†’ +380
    +1 â†’ +1 (ÑƒĞ¶Ğµ ĞºĞ¾Ñ€Ğ¾Ñ‚ĞºĞ¸Ğ¹)
    1 â†’ +1
    """
    if not phone_or_id:
        return None
    
    # Ğ£Ğ±Ğ¸Ñ€Ğ°ĞµĞ¼ Ğ¿Ñ€Ğ¾Ğ±ĞµĞ»Ñ‹
    phone_or_id = str(phone_or_id).strip()
    
    # Ğ•ÑĞ»Ğ¸ ÑƒĞ¶Ğµ ĞºĞ¾Ñ€Ğ¾Ñ‚ĞºĞ¸Ğ¹ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚ (+1, +7, +44, +380)
    if phone_or_id.startswith('+') and len(phone_or_id) <= 4:
        return phone_or_id
    
    # Ğ•ÑĞ»Ğ¸ Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾ Ñ†Ğ¸Ñ„Ñ€Ñ‹ Ğ±ĞµĞ· + (1, 7, 44, 380)
    if phone_or_id.isdigit() and len(phone_or_id) <= 3:
        return f"+{phone_or_id}"
    
    # Ğ•ÑĞ»Ğ¸ Ğ¿Ğ¾Ğ»Ğ½Ñ‹Ğ¹ Ğ½Ğ¾Ğ¼ĞµÑ€ - Ğ¸Ğ·Ğ²Ğ»ĞµĞºĞ°ĞµĞ¼ ĞºĞ¾Ğ´ ÑÑ‚Ñ€Ğ°Ğ½Ñ‹
    if phone_or_id.startswith('+'):
        digits = phone_or_id[1:]  # Ğ£Ğ±Ğ¸Ñ€Ğ°ĞµĞ¼ +
    else:
        digits = phone_or_id
    
    # ĞĞ¿Ñ€ĞµĞ´ĞµĞ»ÑĞµĞ¼ ĞºĞ¾Ğ´ ÑÑ‚Ñ€Ğ°Ğ½Ñ‹ Ğ¿Ğ¾ Ğ¿ĞµÑ€Ğ²Ñ‹Ğ¼ Ñ†Ğ¸Ñ„Ñ€Ğ°Ğ¼
    # ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼ Ğ² Ğ¿Ğ¾Ñ€ÑĞ´ĞºĞµ: ÑĞ½Ğ°Ñ‡Ğ°Ğ»Ğ° Ğ±Ğ¾Ğ»ĞµĞµ Ğ´Ğ»Ğ¸Ğ½Ğ½Ñ‹Ğµ ĞºĞ¾Ğ´Ñ‹ (3 Ñ†Ğ¸Ñ„Ñ€Ñ‹), Ğ·Ğ°Ñ‚ĞµĞ¼ 2 Ñ†Ğ¸Ñ„Ñ€Ñ‹, Ğ·Ğ°Ñ‚ĞµĞ¼ 1 Ñ†Ğ¸Ñ„Ñ€Ñƒ
    
    # 3-Ñ†Ğ¸Ñ„Ñ€Ğ¾Ğ²Ñ‹Ğµ ĞºĞ¾Ğ´Ñ‹
    if digits.startswith('380'):  # Ğ£ĞºÑ€Ğ°Ğ¸Ğ½Ğ°
        return '+380'
    elif digits.startswith('371'):  # Ğ›Ğ°Ñ‚Ğ²Ğ¸Ñ
        return '+371'
    elif digits.startswith('370'):  # Ğ›Ğ¸Ñ‚Ğ²Ğ°
        return '+370'
    
    # 2-Ñ†Ğ¸Ñ„Ñ€Ğ¾Ğ²Ñ‹Ğµ ĞºĞ¾Ğ´Ñ‹
    elif digits.startswith('86'):  # ĞšĞ¸Ñ‚Ğ°Ğ¹
        return '+86'
    elif digits.startswith('44'):  # UK
        return '+44'
    elif digits.startswith('49'):  # Ğ“ĞµÑ€Ğ¼Ğ°Ğ½Ğ¸Ñ
        return '+49'
    
    # 1-Ñ†Ğ¸Ñ„Ñ€Ğ¾Ğ²Ñ‹Ğµ ĞºĞ¾Ğ´Ñ‹
    elif digits.startswith('1'):  # Ğ¡Ğ¨Ğ/ĞšĞ°Ğ½Ğ°Ğ´Ğ°
        return '+1'
    elif digits.startswith(('7', '8')):  # Ğ Ğ¾ÑÑĞ¸Ñ/ĞšĞ°Ğ·Ğ°Ñ…ÑÑ‚Ğ°Ğ½ (8 ÑÑ‚Ğ°Ñ€Ñ‹Ğ¹ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚)
        return '+7'
    # Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµĞ¼ Ğ´Ñ€ÑƒĞ³Ğ¸Ğµ ĞºĞ¾Ğ´Ñ‹ ÑÑ‚Ñ€Ğ°Ğ½ Ğ¿Ğ¾ Ğ½ĞµĞ¾Ğ±Ñ…Ğ¾Ğ´Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸
    else:
        # ĞĞ±Ñ‰Ğ°Ñ Ğ»Ğ¾Ğ³Ğ¸ĞºĞ°: ĞµÑĞ»Ğ¸ Ğ´Ğ»Ğ¸Ğ½Ğ° > 10, Ğ±ĞµÑ€Ñ‘Ğ¼ 1-3 Ğ¿ĞµÑ€Ğ²Ñ‹Ğµ Ñ†Ğ¸Ñ„Ñ€Ñ‹
        if len(digits) >= 10:
            # ĞŸÑ€Ğ¾Ğ±ÑƒĞµĞ¼ 3 Ñ†Ğ¸Ñ„Ñ€Ñ‹
            if digits[:3] in ['380', '371', '370']:
                return f"+{digits[:3]}"
            # ĞŸÑ€Ğ¾Ğ±ÑƒĞµĞ¼ 2 Ñ†Ğ¸Ñ„Ñ€Ñ‹
            elif digits[:2] in ['20', '30', '31', '32', '33', '34', '36', '39', '40', '41', '43', '44', '45', '46', '47', '48', '49']:
                return f"+{digits[:2]}"
            # ĞŸĞ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ 1 Ñ†Ğ¸Ñ„Ñ€Ğ°
            else:
                return f"+{digits[0]}"
        
        return f"+{phone_or_id}"

# Ğ¡Ğ¸Ğ¼ÑƒĞ»ÑÑ†Ğ¸Ñ Ğ²Ğ¸Ñ‚Ñ€Ğ¸Ğ½ (Ñ…Ñ€Ğ°Ğ½ÑÑ‚ÑÑ Ğ¿Ğ¾ ĞºĞ¾Ñ€Ğ¾Ñ‚ĞºĞ¸Ğ¼ ID)
mock_showcases = {
    '+1': {'title': 'USA Showcase', 'id': 123456},
    '+7': {'title': 'Russian Showcase', 'id': 789012},
    '+44': {'title': 'UK Showcase', 'id': 345678},
    '+380': {'title': 'Ukraine Showcase', 'id': 901234},
}

print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
print("ğŸ¬ Ğ”Ğ•ĞœĞĞĞ¡Ğ¢Ğ ĞĞ¦Ğ˜Ğ¯: /showcase ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹ Ñ Ğ½Ğ¾Ñ€Ğ¼Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸ĞµĞ¹")
print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n")

# Ğ¢ĞµÑÑ‚Ğ¾Ğ²Ñ‹Ğµ Ğ²Ñ…Ğ¾Ğ´Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ (Ñ‡Ñ‚Ğ¾ Ğ²Ğ²Ğ¾Ğ´Ğ¸Ñ‚ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ)
test_inputs = [
    ('+1', 'showcase set'),
    ('+15178979270', 'showcase set'),
    ('15178979270', 'showcase set'),
    ('+7', 'showcase info'),
    ('+79261234567', 'showcase info'),
    ('79261234567', 'showcase info'),
    ('+44', 'showcase unlink'),
    ('+442071234567', 'showcase unlink'),
    ('+380991234567', 'showcase create'),
]

print("ğŸ” ĞĞ‘Ğ ĞĞ‘ĞĞ¢ĞšĞ ĞšĞĞœĞĞĞ”:\n")

for raw_phone, action in test_inputs:
    # ĞĞ¾Ñ€Ğ¼Ğ°Ğ»Ğ¸Ğ·ÑƒĞµĞ¼
    normalized_phone = normalize_account_id(raw_phone)
    
    # ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼ Ğ½Ğ°Ğ»Ğ¸Ñ‡Ğ¸Ğµ Ğ²Ğ¸Ñ‚Ñ€Ğ¸Ğ½Ñ‹
    has_showcase = normalized_phone in mock_showcases
    showcase_info = mock_showcases.get(normalized_phone, {})
    
    print(f"ğŸ“ ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ°: /{action} {raw_phone}")
    print(f"   Raw phone:        {raw_phone}")
    print(f"   Normalized:       {normalized_phone}")
    if has_showcase:
        print(f"   âœ… Ğ’Ğ¸Ñ‚Ñ€Ğ¸Ğ½Ğ° Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ğ°: {showcase_info.get('title')}")
    else:
        print(f"   âŒ Ğ’Ğ¸Ñ‚Ñ€Ğ¸Ğ½Ğ° ĞĞ• Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ğ°")
    print()

print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
print("ğŸ’¡ Ğ’Ğ«Ğ’ĞĞ”:")
print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
print("âœ… ĞĞ¾Ñ€Ğ¼Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ¾Ğ·Ğ²Ğ¾Ğ»ÑĞµÑ‚ Ğ½Ğ°Ñ…Ğ¾Ğ´Ğ¸Ñ‚ÑŒ Ğ²Ğ¸Ñ‚Ñ€Ğ¸Ğ½Ñ‹ Ğ½ĞµĞ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾")
print("   Ğ¾Ñ‚ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ° Ğ²Ğ²Ğ¾Ğ´Ğ° Ğ½Ğ¾Ğ¼ĞµÑ€Ğ° Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğ°!")
print()
print("âœ… ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ²Ğ²Ğ¾Ğ´Ğ¸Ñ‚ÑŒ:")
print("   â€¢ ĞšĞ¾Ñ€Ğ¾Ñ‚ĞºĞ¸Ğ¹ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚: +1, +7, +44")
print("   â€¢ ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚: +15178979270, +79261234567")
print("   â€¢ Ğ‘ĞµĞ· Ğ¿Ğ»ÑÑĞ°: 15178979270, 79261234567")
print()
print("âœ… Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ²ÑĞµĞ³Ğ´Ğ° Ğ½Ğ°Ğ¹Ğ´Ñ‘Ñ‚ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½ÑƒÑ Ğ²Ğ¸Ñ‚Ñ€Ğ¸Ğ½Ñƒ!")
print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
