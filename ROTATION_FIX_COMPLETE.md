# üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ü–†–û–ë–õ–ï–ú –° –†–û–¢–ê–¶–ò–ï–ô

## üìä –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

### 1. MAX_PARALLEL_ACCOUNTS = 2 (—Å–ª–∏—à–∫–æ–º –º–∞–ª–æ)
- –£ –≤–∞—Å 10 –∞–∫–∫–∞—É–Ω—Ç–æ–≤, –Ω–æ —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ 2
- –ù—É–∂–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å –ª–∏–º–∏—Ç –¥–æ 10

### 2. –í–æ–∑–º–æ–∂–Ω–∞—è –Ω–µ—Ö–≤–∞—Ç–∫–∞ —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤
- –ê–∫–∫–∞—É–Ω—Ç—ã –ø–µ—Ä–µ—Ö–æ–¥—è—Ç –≤ RESERVE
- –ù–æ –Ω–æ–≤—ã–µ –Ω–µ –∞–∫—Ç–∏–≤–∏—Ä—É—é—Ç—Å—è (–Ω–µ—Ç —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö)

## ‚úÖ –†–ï–®–ï–ù–ò–ï:

### –®–∞–≥ 1: –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ (–Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)
```bash
cd /root/bot
python3 diagnose_rotation.py
```

### –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ—Å—Ç—å
–û—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É:
```
/setparallel 10
```
–ò–ª–∏ –µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ —á—Ç–æ–±—ã —Ä–∞–±–æ—Ç–∞–ª–∏ —Ç–æ–ª—å–∫–æ 5:
```
/setparallel 5
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å—ã –∞–∫–∫–∞—É–Ω—Ç–æ–≤
```
/listaccounts
```

–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ:
- ‚úÖ –ê–∫—Ç–∏–≤–Ω—ã—Ö —Å—Ç–æ–ª—å–∫–æ, —Å–∫–æ–ª—å–∫–æ –≤—ã —Ö–æ—Ç–∏—Ç–µ —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö
- üîµ –†–µ–∑–µ—Ä–≤–Ω—ã—Ö –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è —Ä–æ—Ç–∞—Ü–∏–∏ (–º–∏–Ω–∏–º—É–º —Å—Ç–æ–ª—å–∫–æ –∂–µ, —Å–∫–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö)

### –®–∞–≥ 4: –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å/–¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –Ω—É–∂–Ω—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã
–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å:
```
/toggleaccount +–Ω–æ–º–µ—Ä_—Ç–µ–ª–µ—Ñ–æ–Ω–∞
```

### –®–∞–≥ 5: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–æ—Ç–∞—Ü–∏—é (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```
/setmaxcycles 3    # –†–æ—Ç–∞—Ü–∏—è –∫–∞–∂–¥—ã–µ 3 —Ü–∏–∫–ª–∞ (~6-9 —á–∞—Å–æ–≤)
```
–ò–ª–∏ –æ—Ç–∫–ª—é—á–∏—Ç—å:
```
/setmaxcycles 0    # –ë–µ–∑ —Ä–æ—Ç–∞—Ü–∏–∏
```

### –®–∞–≥ 6: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
```
/stopmon
/startmon
```

## üîç –ß–¢–û –ò–°–ü–†–ê–í–õ–ï–ù–û –í –ö–û–î–ï:

### 1. –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `activate_next_reserve_account()`
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–∫–æ–ª—å–∫–æ —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤ –Ω–∞–π–¥–µ–Ω–æ
- –í—ã–≤–æ–¥–∏—Ç —Å—Ç–∞—Ç—É—Å—ã –≤—Å–µ—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤
- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞–µ—Ç –µ—Å–ª–∏ —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –Ω–µ—Ç

### 2. –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ä–æ—Ç–∞—Ü–∏–∏ –≤–æ—Ä–∫–µ—Ä–æ–≤
- –í–∏–¥–Ω–æ –∫–æ–≥–¥–∞ –≤–æ—Ä–∫–µ—Ä –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è
- –í–∏–¥–Ω–æ –ø–æ–ø—ã—Ç–∫—É –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∑–∞–º–µ–Ω—É
- –í–∏–¥–Ω–æ —É—Å–ø–µ—Ö/–Ω–µ—É–¥–∞—á—É –∑–∞–ø—É—Å–∫–∞ –Ω–æ–≤–æ–≥–æ –≤–æ—Ä–∫–µ—Ä–∞

### 3. –°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ `diagnose_rotation.py`
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ç–∞—Ç—É—Å—ã –≤ –ë–î
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
- –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ª–æ–≥–∏–∫—É —Ä–æ—Ç–∞—Ü–∏–∏
- –î–∞–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

## üìù –ü–†–û–í–ï–†–ö–ê –ü–û–°–õ–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô:

### –í –ª–æ–≥–∞—Ö –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è:
```
üîç –ü–û–ò–°–ö –†–ï–ó–ï–†–í–ù–û–ì–û –ê–ö–ö–ê–£–ù–¢–ê –î–õ–Ø –ê–ö–¢–ò–í–ê–¶–ò–ò
   –í—Å–µ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–æ–≤ –≤ —Å–∏—Å—Ç–µ–º–µ: 10
   –ù–∞–π–¥–µ–Ω–æ —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö —Å —Å–µ—Å—Å–∏–µ–π: 5
   –°—Ç–∞—Ç—É—Å—ã: {'active': 5, 'reserve': 5}
   ‚úÖ –í—ã–±—Ä–∞–Ω –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏: Name (+–Ω–æ–º–µ—Ä)
‚úÖ Activated next reserve account: Name (+–Ω–æ–º–µ—Ä)
üöÄ Launching replacement worker...
‚úÖ Replacement worker launched successfully
```

### –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ª–æ–≥–æ–≤:
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Ä–æ—Ç–∞—Ü–∏–∏
sudo journalctl -u comapc-bot -n 500 --no-pager | grep -E "ROTATION|activate|RESERVE|ACTIVE"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –≤–æ—Ä–∫–µ—Ä–æ–≤
sudo journalctl -u comapc-bot -n 500 --no-pager | grep -E "WORKER STARTED|CREATING"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—à–∏–±–∫–∏
sudo journalctl -u comapc-bot -n 500 --no-pager | grep -i "error\|warning"
```

## üéØ –û–ñ–ò–î–ê–ï–ú–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢:

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
1. ‚úÖ –í—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã (5-10) —Ä–∞–±–æ—Ç–∞—é—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
2. ‚úÖ –ü—Ä–∏ —Ä–æ—Ç–∞—Ü–∏–∏ —Å—Ç–∞—Ä—ã–π –∞–∫–∫–∞—É–Ω—Ç ‚Üí RESERVE
3. ‚úÖ –ù–æ–≤—ã–π –∞–∫–∫–∞—É–Ω—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ ‚Üí ACTIVE
4. ‚úÖ –ù–æ–≤—ã–π –≤–æ—Ä–∫–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–∞ –∑–∞–º–µ–Ω—É
5. ‚úÖ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç—Å—è –±–µ–∑ –ø—Ä–æ—Å—Ç–æ—è

## ‚ö†Ô∏è –í–ê–ñ–ù–û:

### –ï—Å–ª–∏ —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –Ω–µ—Ç:
- –†–æ—Ç–∞—Ü–∏—è –±—É–¥–µ—Ç –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç—ã –≤ RESERVE
- –ù–æ –Ω–æ–≤—ã–µ –Ω–µ –±—É–¥—É—Ç –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å—Å—è
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö –≤–æ—Ä–∫–µ—Ä–æ–≤ –±—É–¥–µ—Ç —É–º–µ–Ω—å—à–∞—Ç—å—Å—è

### –†–µ—à–µ–Ω–∏–µ:
- **–í–∞—Ä–∏–∞–Ω—Ç –ê:** –î–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ –∞–∫–∫–∞—É–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ `/auth`
- **–í–∞—Ä–∏–∞–Ω—Ç –ë:** –û—Ç–∫–ª—é—á–∏—Ç—å —Ä–æ—Ç–∞—Ü–∏—é `/setmaxcycles 0`
- **–í–∞—Ä–∏–∞–Ω—Ç –í:** –£–º–µ–Ω—å—à–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö

## üöÄ –†–ï–ö–û–ú–ï–ù–î–£–ï–ú–ê–Ø –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø –î–õ–Ø 10 –ê–ö–ö–ê–£–ù–¢–û–í:

```
5 –∞–∫—Ç–∏–≤–Ω—ã—Ö + 5 —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö
/setparallel 5
/setmaxcycles 3
/setworkermode distributed
```

–ò–ª–∏ –≤—Å–µ 10 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –±–µ–∑ —Ä–æ—Ç–∞—Ü–∏–∏:
```
10 –∞–∫—Ç–∏–≤–Ω—ã—Ö + 0 —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö
/setparallel 10
/setmaxcycles 0
/setworkermode cyclic
```
